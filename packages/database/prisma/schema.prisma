generator client {
  provider = "prisma-client-js"
  output   = "../generated/client"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String?   @unique
  emailVerified DateTime?
}

model Complaint {
  id                    String          @id @default(cuid())
  customerName          String
  customerPhone         String?
  customerEmail         String?
  customerAddress       String?
  customerCity          String?
  customerState         String?
  customerZip           String?
  respondentName        String?
  respondentPhone       String?
  respondentAddress     String?
  respondentCity        String?
  respondentState       String?
  respondentZip         String?
  dealershipRep         String?
  complaintType         String?
  explainComplaint      String?
  signatureName         String?
  signatureDate         DateTime?
  dmvRepresentative     String?
  dmvRepresentativeDate DateTime?
  dmvSupervisor         String?
  dmvSupervisorDate     DateTime?
  caseNumber            String?         @unique
  dateReceived          DateTime?
  investigator          String?
  status                ComplaintStatus @default(NEW)
  createdAt             DateTime        @default(now())
  updatedAt             DateTime        @updatedAt
  documents             Document[]
  vehicle               Vehicle?
}

model Vehicle {
  id            String    @id @default(cuid())
  vin           String?   @db.VarChar(17)
  year          Int?
  make          String?
  model         String?
  color         String?
  plateNumber   String?
  plateOrUtitle String?
  complaintId   String    @unique
  complaint     Complaint @relation(fields: [complaintId], references: [id])
}

model Document {
  id          String    @id @default(cuid())
  fileName    String
  fileType    String?
  fileSize    Int?
  url         String?
  notes       String?
  complaintId String
  uploadedAt  DateTime  @default(now())
  complaint   Complaint @relation(fields: [complaintId], references: [id])
}

enum ComplaintStatus {
  NEW
  UNDER_REVIEW
  INVESTIGATING
  CLOSED
  REFERRED
}
